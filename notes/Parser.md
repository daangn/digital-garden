# Parser

- [JSON.parse 직접 만들어보기. By 최종찬 | by Riiid Techblog | Medium](https://riiidtechblog.medium.com/json-parse-%EC%A7%81%EC%A0%91-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EA%B8%B0-f567ecdf08c0)
  - `JSON.parse` 같은 함수는 어떻게 만드는 걸까요? 직접 만들 수 있다면 문법을 약간 고쳐서 불편했던 부분들을 개선한 나만의 [[JSON]]을 만들수도 있지 않을까요?
  - 어떤 언어로 작성된 코드가 어떤 구조를 갖고있는지 분석하는 프로그램을 **파서([[Parser]])**라고 부릅니다. 파서를 사용해서 분석한 어떤 구조를 **추상 구문 트리(Abstract Syntax Tree. 이하 [[AST]])**라고 부릅니다.
  - 형식 언어와 [[촘스키 위계]]
    - 촘스키 위계는 형식 언어를 언어가 갖는 제약에 따라 몇가지 단계로 구분해 둔 것인데요, **정규 언어**, **문맥 자유 언어**, **문맥 의존 언어** 등으로 나뉩니다.
  - [[Parser Generator]]
    - 파서 생성기들은 문맥 자유 문법을 입력으로 받아서 문맥 자유 언어에 속하는 문자열을 분석해주는 프로그램을 생성해줍니다.
  - 배커스 나우르 표기법과 기찻길 다이어그램
    - 문맥 자유 문법은 **배커스 나우르 표기법([[Backus Naur Form]]. 이하 BNF)** 또는 **기찻길 다이어그램([[Railroad Diagram]])**으로 표현할 수 있습니다.

- [좋은 구문 오류 생성하기](http://dalinaum.github.io/compiler/2021/02/04/yyerror.html)
  - [[yacc]]류와 같은 파서 생성기([[Parser Generator]], 구문 분석기 생성기)를 써야할지 (일반적으로는 재귀 하강(recursive descent)을 이용해) 손으로 파서를 작성할지 여부는 컴파일러를 작성할 때 큰 논쟁거리입니다.
  - 손으로 파서를 만드는 이들의 반대들은 lex에 대해 톰슨이 한 것과 비슷합니다. 도구가 원하는대로 수행하지 않는다는 거죠. 하지만 도구가 할수 없는 근본적인 이유는 없습니다. 예를 들어 LALR(1) 알고리즘이 생성하는 가짜 충돌은 확실히 이해하기 어렵습니다. 하지만 이걸 LR(1)이나 GLR(1)로 바꾼다면 더 유용한 도구를 얻습니다. 그리고 LALR(1) 알고리즘 내에서 작업하는 법을 배운다면 심지어 yacc 조차 매우 강력합니다.
  - 가장 큰 방향을 불러일으키는 파서 생성에 대한 반대는 yacc 같은 생성기가 “구문 오류”에 불과한 부적절한 오류 메시지를 생성한다는 것 같습니다.
  - 파서는 입력토큰을 처리할 때에 내부적으로 상태 간 이동하는 오토마타(일반적으로는 큰 숫자 테이블)로 컴파일 합니다. 이동할 다음 상태를 찾을 수 없을 때 오류를 보고하고요. 이걸 어떻게 좋은 메시지로 바꿀 수 있겠습니까?
  - 클린턴 제퍼리(Clinton Jeffery)는 2003년 ACM TOPLAS에 발표한 “[예제로 부터 LR 구문 오류 메시지를 생성하기. (Generating LR Syntax Error Messages from Examples)](http://people.cs.vt.edu/~haebang//coursework/PL/summary.pdf)”(주: 링크는 깨졌고 ACM의 계정이 있어야 논문을 읽을 수 있습니다.)에서 방법을 보여주었습니다.
  - 제목에서 짐작할 수 있듯 파서가 생성된 후 실제로 사용되기 전에 학습 단계를 도입하는 아이디어입니다. 이 단계에서 구문 오류의 예를 파서에게 제공하고 오류를 감지했을 때 어떤 상태가 되는지 다음 토큰이 무엇이 되는지 살핍니다. 실 사용중에 오토마타가 그 상태(와 입력 토큰)로 에러를 만나면 예의 적합한 메시지를 보여줄 수 있습니다.
  - [[Go]] 파서는 세 종류가 있습니다. 이언 랜스 테일러(Ian Lance Taylor)가 gccgo를 위해 [[C++]]로 손으로 작성한 재귀 하강 파서, 로버트 그리즈머(Robert Griesemer)가 [godoc](http://golang.org/cmd/godoc/)과 [gofmt](http://golang.org/cmd/gofmt/)를 위해 [[Go]]로 손으로 작성한 재귀 하강 파서 (import “[go/parser](http://golang.org/pkg/go/parser)”), 켄 톰슨이 gc 컴파일러 스위트를 위해 [[C]]로 작성한 [[yacc]] 기반의 파서입니다.

[//begin]: # "Autogenerated link references for markdown compatibility"
[JSON]: JSON "JSON"
[Parser]: Parser "Parser"
[AST]: AST "AST: Abstact Syntax Tree"
[촘스키 위계]: 촘스키 위계 "촘스키 위계"
[Parser Generator]: Parser Generator "Parser Generator"
[Backus Naur Form]: Backus Naur Form "Backus Naur Form"
[Railroad Diagram]: Railroad Diagram "Railroad Diagram"
[Go]: Go "Go (프로그래밍 언어)"
[//end]: # "Autogenerated link references"